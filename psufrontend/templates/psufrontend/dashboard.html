{% extends 'base.html' %}
{% load i18n %}
{% load extra_utils %}

{% block title %}{% trans "Dashboard" %} - Plant Supply Unit{% endblock title %}{% trans "Dashboard" %}

{% block body %}

	<div class="row">
		<div class="col-md-3">
			<h5>MY PSUs:</h5>
			<hr>
			<div>
				<a class="btn btn-primary" href="{% url 'psufrontend:register_psu' %}">Add new PSU</a>
				<table>
					<thead>
						<tr>
							<th>{% trans "Identity key" %}</th>
							<th>{% trans "Name" %}</th>
						</tr>
					</thead>

					<tbody>
						{% for p in psus %}
							<tr>
								<td>{{ p.id }}</td>
								<td>{{ p.pretty_name }}</td>
							</tr>
						{% endfor %}
					</tbody>

				</table>
			</div>
		</div>

		<div class="col-md-9">
			<h5>LAST 10 MEASUREMENTS:</h5>
			<hr>
			<div class="card card-body">
				<a class="btn btn-primary" href="{% url 'psufrontend:add_watering_task' %}">Manually water the plant</a>
			    <table class="table-striped">
			      <!-- table head -->
			      <thead>
			        <tr>
			          <th style="flex: 1.5;">{% trans "Timestamp" %}</th>
			          <th>{% trans "Temperature" %}</th>
			          <th>{% trans "Air Humidity" %}</th>
			          <th>{% trans "Ground Humidity" %}</th>
			          <th>{% trans "Brightness" %}</th>
			          <th>{% trans "Fill Level" %}</th>
			        </tr>
			      </thead>

			      <!-- table body with measurements -->
			      <tbody>
			        {% for m in measurements %}
			          <tr>
			            <td style="flex: 1.5;">{{ m.timestamp }}</td>
			            <td>{{ m.temperature | round:1 }} Â°C</td>
			            <td>{{ m.air_humidity | round:1 }} %</td>
			            <td>{{ m.ground_humidity | round:1 }} %</td>
			            <td>{{ m.brightness | round:0 }} %</td>
			            <td>{{ m.fill_level | round:0 }} %</td>
			          </tr>
			        {% endfor %}
			      </tbody>
			    </table>
			</div>
		</div>

	</div>


{% endblock %}