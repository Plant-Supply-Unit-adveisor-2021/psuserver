{% extends 'base.html' %}
{% load i18n %}
{% load extra_utils %}

{% block title %}{% trans "Dashboard" %} - Plant Supply Unit{% endblock title %}{% trans "Dashboard" %}

{% block body %}
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<div class="row">
		<div class="col-md-4">
			<h5>MY PSUs:</h5>
			<hr>
			<div class="card card-body">
				<a class="btn btn-primary  btn-sm btn-block" href="{% url 'psufrontend:register_psu' %}">Add new PSU</a>
				<table class="table table-sm">
					<thead>
						<tr>
							<th>{% trans "Identity key" %}</th>
							<th>{% trans "Name" %}</th>
						</tr>
					</thead>

					<tbody>
						{% for p in psus %}
							<tr>
								<td>{{ p.id }}</td>
								<td>{{ p.pretty_name }}</td>
							</tr>
						{% endfor %}
					</tbody>

				</table>
			</div>
		</div>

		<div class="col-md-8">
			<h5>LAST 10 MEASUREMENTS:</h5>
			<hr>
			<div class="card card-body">
				<a class="btn btn-primary  btn-sm btn-block" href="{% url 'psufrontend:add_watering_task' %}">Manually water the plant</a>
			    <table class="table table-sm">
			      <!-- table head -->
			      <thead>
			        <tr>
			          <th style="flex: 1.5;">{% trans "Timestamp" %}</th>
			          <th>{% trans "Temperature" %}</th>
			          <th>{% trans "Air Humidity" %}</th>
			          <th>{% trans "Ground Humidity" %}</th>
			          <th>{% trans "Brightness" %}</th>
			          <th>{% trans "Fill Level" %}</th>
			        </tr>
			      </thead>

			      <!-- table body with measurements -->
			      <tbody>
			        {% for d in d_measurements %}
			          <tr>
			            <td style="flex: 1.5;">{{ d.timestamp }}</td>
			            <td>{{ d.temperature | round:1 }} Â°C</td>
			            <td>{{ d.air_humidity | round:1 }} %</td>
			            <td>{{ d.ground_humidity | round:1 }} %</td>
			            <td>{{ d.brightness | round:0 }} %</td>
			            <td>{{ d.fill_level | round:0 }} %</td>
			          </tr>
			        {% endfor %}
			      </tbody>
			    </table>
			</div>
		</div>

	</div>


{% endblock %}